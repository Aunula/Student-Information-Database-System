<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration - ABCD University</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Error Message Styling */
        .error-message {
            color: #ef4444; /* Tailwind red-500 */
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none; /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        }
        /* Form Animation (Fade-in effect) */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .form-fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        /* Input Focus Glow Effect */
        .input-bordered:focus, .select-bordered:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* blue-500 with opacity */
            border-color: #3b82f6; /* blue-500 */
        }
        /* Input error style */
        .input-error {
            border-color: #ef4444 !important; /* ‡¶≤‡¶æ‡¶≤ ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ */
        }
    </style>
</head>
<body class="bg-gray-100">
    
    <header>
        <div class="navbar sticky top-0 z-50 shadow-md bg-gradient-to-r from-white to-blue-100 px-10">

            <div class="navbar-start">
                <div class="dropdown">
                    <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h8m-8 6h16" />
                        </svg>
                    </div>
                    <ul tabindex="-1"
                        class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow">
                        <li><a>Home</a></li>
                        <li>
                            <a>Info</a>
                            <ul class="p-2">
                                <li><a>Information</a></li>
                                <li><a>Facilities</a></li>
                            </ul>
                        </li>
                        <li><a>Contact</a></li>
                    </ul>
                </div>
                <a class="btn btn-ghost text-xl font-bold text-blue-800">ABCD University</a>
            </div>

            <div class="navbar-center hidden lg:flex">
                <ul class="menu menu-horizontal space-x-15 font-medium text-gray-800">
                    <li><a href="Information/faculty.html">Faculty</a></li>
                    <li><a href="Information/classroutine.html">Class Routine</a></li>
                    <li><a href="Information/Notice.html">Notice</a></li>
                    <li><a href="Information/Rating.html">Rating</a></li>
                </ul>
            </div>

            <div class="navbar-end">
                <a href="../login/login.html" class="btn btn-primary text-white">Logout</a>
            </div>
        </div>
    </header>
    <main class="flex justify-center p-4 sm:p-6 md:p-10 min-h-screen bg-gradient-to-br from-gray-100 to-blue-50">
        
        <div class="w-full max-w-5xl form-fade-in">
            <H1 class="font-extrabold text-4xl text-center mb-2 text-blue-800 tracking-wide">
                <span class="text-blue-500">üìù</span> Student Registration
            </H1>
            <p class="text-center text-gray-600 mb-8 font-medium">Please fill out the form below to register for the upcoming semester.</p>

            <div class="card bg-white shadow-2xl border border-blue-200/50">
                <div class="card-body p-6 sm:p-8 md:p-12">
                    
                    <form id="registrationForm" action="process_registration.php" method="POST" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-6">

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Student Name <span class="text-red-500">*</span></span>
                            </label>
                            <input type="text" id="student_name" name="student_name" placeholder="Enter full name" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="name_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Father's Name <span class="text-red-500">*</span></span>
                            </label>
                            <input type="text" id="father_name" name="father_name" placeholder="Enter father's full name" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="father_name_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Mother's Name <span class="text-red-500">*</span></span>
                            </label>
                            <input type="text" id="mother_name" name="mother_name" placeholder="Enter mother's full name" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="mother_name_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Mobile No. <span class="text-red-500">*</span></span>
                            </label>
                            <input type="tel" id="mobile_no" name="mobile_no" placeholder="e.g., 01700000000" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="mobile_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Date of Birth <span class="text-red-500">*</span></span>
                            </label>
                            <input type="date" id="dob" name="dob" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="dob_error" class="error-message"></span>
                        </div>
                        
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Department Name <span class="text-red-500">*</span></span>
                            </label>
                            <select id="department" name="department" class="select select-bordered w-full transition duration-300 hover:border-blue-400">
                                <option disabled selected value="">Select Department</option>
                                <option value="CSE">Computer Science and Engineering (CSE)</option>
                                <option value="EEE">Electrical and Electronic Engineering (EEE)</option>
                                <option value="BBA">Bachelor of Business Administration (BBA)</option>
                                <option value="ENG">English</option>
                                <option value="LAW">Law</option>
                            </select>
                            <span id="dept_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Batch No. <span class="text-red-500">*</span></span>
                            </label>
                            <input type="number" id="batch_no" name="batch_no" placeholder="e.g., 29" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="batch_error" class="error-message"></span>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Section <span class="text-red-500">*</span></span>
                            </label>
                            <input type="text" id="section" name="section" placeholder="e.g., A or B" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <span id="section_error" class="error-message"></span>
                        </div>

                        <div class="form-control md:col-span-2 lg:col-span-3">
                            <label class="label">
                                <span class="label-text font-semibold text-gray-700">Roll No. <span class="text-red-500">*</span></span>
                            </label>
                            <input type="text" id="roll_no" name="roll_no" placeholder="e.g., CSE 0290761" class="input input-bordered w-full transition duration-300 hover:border-blue-400" />
                            <label class="label">
                                <span class="label-text-alt text-gray-500">Format: DEPT XXXX XXX (e.g., CSE 0290761)</span>
                            </label>
                            <span id="roll_error" class="error-message"></span>
                        </div>

                        <div class="form-control mt-6 md:col-span-2 lg:col-span-3 text-center">
                            <button type="submit" class="btn btn-primary btn-lg text-white font-bold tracking-wider transition-all duration-500 ease-in-out transform hover:scale-[1.02] shadow-xl hover:shadow-blue-500/50">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                Submit Registration
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("registrationForm");
            // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ
            const studentName = document.getElementById("student_name");
            const fatherName = document.getElementById("father_name");
            const motherName = document.getElementById("mother_name");
            const mobileNo = document.getElementById("mobile_no");
            const dob = document.getElementById("dob");
            const department = document.getElementById("department");
            const batchNo = document.getElementById("batch_no");
            const section = document.getElementById("section");
            const rollNo = document.getElementById("roll_no");

            // ‡¶è‡¶∞‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ
            const nameError = document.getElementById("name_error");
            const fatherNameError = document.getElementById("father_name_error");
            const motherNameError = document.getElementById("mother_name_error");
            const mobileError = document.getElementById("mobile_error");
            const dobError = document.getElementById("dob_error");
            const deptError = document.getElementById("dept_error");
            const batchError = document.getElementById("batch_error");
            const sectionError = document.getElementById("section_error");
            const rollError = document.getElementById("roll_error");

            form.addEventListener("submit", (event) => {
                event.preventDefault(); // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
                let isValid = validateForm(); 
                
                if (isValid) {
                    // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶° ‡¶π‡¶≤‡ßá
                    console.log("Form is valid. Submitting to PHP...");
                    // ‡¶Ü‡¶∏‡¶≤ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:
                    form.submit(); 
                } else {
                    // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶á‡¶®‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶° ‡¶π‡¶≤‡ßá
                    console.log("Form is invalid.");
                    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ø‡ßá ‡¶è‡¶∞‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá, ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶ï‡¶∞‡¶æ
                    const firstError = document.querySelector('.error-message[style*="block"]');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            });

            function validateForm() {
                let valid = true; 
                hideAllErrors(); // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶∏‡¶¨ ‡¶è‡¶∞‡¶∞ ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡¶æ

                // 1. Student Name
                if (studentName.value.trim() === "") {
                    showError(nameError, "Student Name is required.", studentName);
                    valid = false;
                }

                // 2. Father's Name
                if (fatherName.value.trim() === "") {
                    showError(fatherNameError, "Father's Name is required.", fatherName);
                    valid = false;
                }

                // 3. Mother's Name
                if (motherName.value.trim() === "") {
                    showError(motherNameError, "Mother's Name is required.", motherName);
                    valid = false;
                }

                // 4. Mobile No.
                const mobileRegex = /^01[3-9]\d{8}$/; 
                if (mobileNo.value.trim() === "") {
                    showError(mobileError, "Mobile number is required.", mobileNo);
                    valid = false;
                } else if (!mobileRegex.test(mobileNo.value.trim())) {
                    showError(mobileError, "Must be a valid 11-digit Bangladeshi number (e.g., 017...).", mobileNo);
                    valid = false;
                }

                // 5. Date of Birth
                if (dob.value === "") {
                    showError(dobError, "Date of Birth is required.", dob);
                    valid = false;
                } else {
                    // ‡¶¨‡¶Ø‡¶º‡¶∏ ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ßß‡ß¨ ‡¶¨‡¶õ‡¶∞ ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
                    const selectedDate = new Date(dob.value);
                    const today = new Date();
                    const minAgeDate = new Date(today.getFullYear() - 16, today.getMonth(), today.getDate());
                    if (selectedDate > minAgeDate) {
                        showError(dobError, "Student must be at least 16 years old to register.", dob);
                        valid = false;
                    }
                }

                // 6. Department
                if (department.value === "") {
                    showError(deptError, "Please select a department.", department);
                    valid = false;
                }

                // 7. Batch No.
                if (batchNo.value.trim() === "" || isNaN(batchNo.value) || parseInt(batchNo.value) <= 0) {
                    showError(batchError, "Batch number is required and must be valid.", batchNo);
                    valid = false;
                }

                // 8. Section
                if (section.value.trim() === "") {
                    showError(sectionError, "Section is required.", section);
                    valid = false;
                }

                // 9. Roll No.
                // DEPT 1234567 format: 3 or 4 letters, followed by space, followed by 7 digits
                const rollRegex = /^[A-Z]{3,4}\s\d{7}$/; 
                if (rollNo.value.trim() === "") {
                    showError(rollError, "Roll number is required.", rollNo);
                    valid = false;
                } else if (!rollRegex.test(rollNo.value.trim())) {
                    showError(rollError, "Format must be: DEPT 1234567 (e.g., CSE 0290761)", rollNo);
                    valid = false;
                }

                return valid;
            }

            // ‡¶è‡¶∞‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
            function showError(errorElement, message, inputElement) {
                errorElement.textContent = message;
                errorElement.style.display = "block";
                inputElement.classList.add("input-error"); // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡¶æ‡¶≤ ‡¶ï‡¶∞‡¶æ
            }

            // ‡¶∏‡¶¨ ‡¶è‡¶∞‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
            function hideAllErrors() {
                const errors = [nameError, fatherNameError, motherNameError, mobileError, dobError, deptError, batchError, sectionError, rollError];
                errors.forEach(err => {
                    err.style.display = "none";
                    
                    // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡ßá error ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶∞‡¶æ‡¶®‡ßã
                    const inputId = err.id.replace('_error', '');
                    const inputElement = document.getElementById(inputId);
                    if(inputElement) {
                        inputElement.classList.remove("input-error"); // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó ‡¶∏‡¶∞‡¶æ‡¶®‡ßã
                    }
                });
            }

            // ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® (‡¶≤‡¶ø‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá)
            [studentName, fatherName, motherName, mobileNo, dob, department, batchNo, section, rollNo].forEach(input => {
                // 'input' ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø, 'change' ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü/‡¶°‡ßá‡¶ü/‡¶´‡¶æ‡¶á‡¶≤ ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
                const eventType = (input.tagName === 'SELECT' || input.type === 'date') ? 'change' : 'input';
                
                input.addEventListener(eventType, () => {
                    validateForm(); // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                });
            });

        });
    </script>
</body>
</html>